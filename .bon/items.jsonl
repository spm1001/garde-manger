{"id": "arc-besada", "type": "outcome", "title": "Monthly dep hygiene sweep across all repos", "brief": {"why": "Unused deps accumulate silently — only caught when a CVE triggers Dependabot. Proactive monthly sweep catches dead weight before it matters.", "what": "Todoist recurring task (monthly) to run github-cleanup Phase 4c across ~/Repos. Could also be a cron job that opens a PR.", "done": "Recurring reminder exists and has fired at least once"}, "status": "open", "order": 28, "created_at": "2026-02-13T11:59:04Z", "created_by": "spm1001"}
{"id": "arc-bokace", "type": "outcome", "title": "Show stale indicator in search results", "brief": {"why": "Stale sources appear in search without indication that their path is invalid, causing confusion", "what": "Add [stale] marker to search output for sources with status=stale", "done": "Search results show [stale] indicator, optionally filter with --include-stale or --exclude-stale"}, "status": "done", "order": 25, "created_at": "2026-02-03T21:26:08Z", "created_by": "spm1001", "done_at": "2026-02-13T08:10:01Z"}
{"id": "arc-fibuta", "type": "outcome", "title": "Garde indexes Amp threads as a first-class source", "brief": {"why": "Amp is thread-focused — every conversation is a discrete, retrievable thread with an ID and URL. Unlike CC sessions (scattered JSONL in ~/.claude/projects/), Amp threads are structured and easy to enumerate. garde should parse them all, not just rely on close-ritual extractions.", "what": "1. Identify where Amp stores thread data on disk (or API) 2. Write an Amp adapter in src/garde/adapters/ that enumerates and parses threads 3. Extract content suitable for FTS indexing 4. Add --source amp to CLI choices 5. Test with real Amp threads", "done": "uv run garde scan --source amp indexes Amp threads. uv run garde search finds content from Amp conversations. uv run garde recent --all shows Amp threads alongside CC sessions."}, "status": "done", "order": 31, "created_at": "2026-02-14T22:56:23Z", "created_by": "spm1001", "done_at": "2026-02-15T20:44:41Z"}
{"id": "arc-kozuji", "type": "outcome", "title": "In-session extraction at /close", "brief": {"why": "Backfill is a catch-up operation that spawns subprocess per source. Extracting during /close uses tokens already being spent, has richer context, and eliminates the backfill queue entirely.", "what": "1. Add store-extraction call to /close skill after handoff write 2. Use HYBRID_EXTRACTION_PROMPT in-context (no subprocess needed) 3. Pipe result to mem store-extraction 4. Test with a real /close cycle", "done": "New sessions get extractions at close time. Backfill queue stays empty without manual runs."}, "status": "done", "order": 27, "created_at": "2026-02-08T18:03:05Z", "created_by": "spm1001", "done_at": "2026-02-13T08:16:45Z"}
{"id": "arc-penuwe", "type": "outcome", "title": "Audit repos without committed lock files", "brief": {"why": "Repos with pyproject.toml but no uv.lock in git mean Dependabot can't scan them — a blind spot in the security posture.", "what": "Scan all spm1001 repos for presence of uv.lock/package-lock.json. Flag repos that have manifests but no lock file committed.", "done": "List produced, lock files committed where appropriate"}, "status": "open", "order": 30, "created_at": "2026-02-13T11:59:09Z", "created_by": "spm1001"}
{"id": "arc-zogape", "type": "outcome", "title": "Automate runtime-engine detection in dep audit", "brief": {"why": "Current dep audit relies on prose advice to check for openpyxl/lxml/kaleido before removing. A script would be more robust and prevent accidental breakage.", "what": "Script that greps source for string references like 'lxml', 'openpyxl', write_image, asyncio_mode before confirming a dep is truly unused. Integrate into github-cleanup Phase 4c.", "done": "Script exists, tested against writing-style-and-criticism (lxml) and itv-linkedin-analytics (openpyxl, kaleido)"}, "status": "open", "order": 29, "created_at": "2026-02-13T11:59:06Z", "created_by": "spm1001"}
{"id": "bon-gatepe", "type": "action", "title": "Search and drill work end-to-end for Amp threads", "brief": {"why": "Indexing is useless if search doesn't surface Amp content and drill can't display it", "what": "1. Verify FTS5 search returns Amp thread results 2. Verify garde drill loads Amp thread content 3. Verify garde recent --all shows Amp threads alongside CC sessions 4. Fix any gaps in display/formatting", "done": "uv run garde search finds Amp content, uv run garde drill amp:T-xxx shows thread, uv run garde recent --all interleaves Amp and CC"}, "status": "done", "parent": "arc-fibuta", "order": 3, "created_at": "2026-02-15T20:41:44Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["Verify FTS5 search returns Amp thread results", "Verify garde drill loads Amp thread content", "Verify garde recent --all shows Amp threads alongside CC sessions", "Fix any gaps in display/formatting"], "current": 4, "session": "/home/modha/Repos/garde-manger"}, "updated_at": "2026-02-15T20:44:21Z", "done_at": "2026-02-15T20:44:21Z"}
{"id": "bon-hakamu", "type": "action", "title": "Amp adapter parses threads into indexable sources", "brief": {"why": "Amp stores 61 threads as JSON files — structured, easy to enumerate, but invisible to garde", "what": "1. Create src/garde/adapters/amp.py with AmpSource dataclass and discover_amp generator 2. Parse thread JSON: extract messages, filter thinking/tool blocks, build full_text 3. Extract metadata (title, agentMode, project from env.initial.trees, token usage) 4. Handle presummary: Amp threads have no pre-distilled summary, so has_presummary=False", "done": "discover_amp yields AmpSource for each thread in ~/.local/share/amp/threads/, full_text returns conversation content, source_id is amp:{thread_id}"}, "status": "done", "parent": "arc-fibuta", "order": 1, "created_at": "2026-02-15T20:41:30Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["Create src/garde/adapters/amp.py with AmpSource dataclass and discover_amp generator", "Parse thread JSON: extract messages, filter thinking/tool blocks, build full_text", "Extract metadata (title, agentMode, project from env.initial.trees, token usage)", "Handle presummary: Amp threads have no pre-distilled summary, so has_presummary=False"], "current": 4, "session": "/home/modha/Repos/garde-manger"}, "updated_at": "2026-02-15T20:42:42Z", "done_at": "2026-02-15T20:42:42Z"}
{"id": "bon-pibuno", "type": "outcome", "title": "Verify claude -p auth works from cron on kube", "brief": {"why": "Daily backfill at 03:00 calls claude -p for LLM extraction. If Max subscription auth isn't in cron's environment, extractions fail silently to /tmp/garde-amp-backfill.log", "what": "1. Check /tmp/garde-amp-backfill.log after first 03:00 run 2. If auth fails, add CLAUDE_AUTH or equivalent to cron environment 3. Verify at least one Amp thread gets extracted", "done": "garde-amp-backfill.log shows successful extractions, garde drill on a backfilled amp thread shows rich summary"}, "status": "open", "order": 32, "created_at": "2026-02-15T21:30:28Z", "created_by": "spm1001"}
{"id": "bon-tazafi", "type": "action", "title": "Register Amp adapter in CLI and scan pipeline", "brief": {"why": "Adapter exists but garde won't use it until wired into the scan command and CLI choices", "what": "1. Add import for discover_amp/AmpSource in cli.py 2. Add 'amp' to source type choices 3. Add amp scan loop in scan command (following existing pattern) 4. Test: uv run garde scan --source amp", "done": "uv run garde scan --source amp indexes all 61 threads, uv run garde status shows amp count"}, "status": "done", "parent": "arc-fibuta", "order": 2, "created_at": "2026-02-15T20:41:37Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["Add import for discover_amp/AmpSource in cli.py", "Add 'amp' to source type choices", "Add amp scan loop in scan command (following existing pattern)", "Test: uv run garde scan --source amp"], "current": 4, "session": "/home/modha/Repos/garde-manger"}, "updated_at": "2026-02-15T20:43:45Z", "done_at": "2026-02-15T20:43:45Z"}
{"id": "bon-widafo", "type": "outcome", "title": "Garde links Amp handoff chains into navigable arcs", "brief": {"why": "Amp threads have bidirectional parent/child relationships forming work chains (e.g. 5-thread Arc-to-Bon rename). The adapter now stores these in metadata['relationships'] but garde doesn't use them yet — each thread is still an island in search results", "what": "1. Parse relationships from amp source metadata during indexing 2. Store thread-to-thread edges in a new table or existing entity system 3. Surface chains in search results (e.g. 'part 3 of 5 in arc') 4. Enable garde drill to show chain context", "done": "garde search shows chain membership, garde drill on a mid-chain thread shows parent and child links, full chain navigable"}, "status": "open", "order": 33, "created_at": "2026-02-15T21:30:37Z", "created_by": "spm1001"}
{"id": "bon-wovidi", "type": "outcome", "title": "Add test coverage for Amp adapter", "brief": {"why": "108 tests pass but none cover the amp adapter. A future refactor (registry pattern) or Amp schema change could break it silently", "what": "1. Create tests/test_amp.py with fixture JSON matching real thread structure 2. Test from_file parsing (messages, metadata, relationships, timestamps) 3. Test discover_amp enumeration and .amptmp filtering 4. Test full_text extraction (user/assistant only, no thinking/tool blocks)", "done": "pytest tests/test_amp.py passes, covers happy path and edge cases (empty thread, missing title, thread with relationships)"}, "status": "open", "order": 34, "created_at": "2026-02-15T21:30:45Z", "created_by": "spm1001"}
